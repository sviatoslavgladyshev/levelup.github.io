<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>LevelUp ID</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/fontawesome-all.css" rel="stylesheet">
    <link href="css/swiper.css" rel="stylesheet">
    <link href="css/magnific-popup.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <link rel="icon" href="images/white_logo.png">
</head>
<body data-spy="scroll" data-target=".fixed-top">
    <div class="spinner-wrapper">
        <div class="spinner">
            <div class="bounce1"></div> 
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top", style="background-color: rgb(135, 25, 206); padding: 1rem 0.75rem 1rem 0.75rem">
            <div class="container">
    
                <!-- Text Logo - Use this if you don't have a graphic logo -->
                <!-- <a class="navbar-brand logo-text page-scroll" href="index.html">LevelUp</a> -->
    
                <!-- Image Logo -->
                <a class="navbar-brand logo-image no-underline" href="index.html"><span class="brand-text">LvlUp!</span> <img src="images/logo_transparent.png" alt="alternative"></a>
                
                <!-- Mobile Menu Toggle Button -->
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-awesome fas fa-bars"></span>
                    <span class="navbar-toggler-awesome fas fa-times"></span>
                </button>
                <!-- end of mobile menu toggle button -->
    
                <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link page-scroll" href="index.html#header">HOME <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle page-scroll" href="#video" id="navbarDropdown" role="button" aria-haspopup="true" aria-expanded="false">ABOUT</a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown", style="border: 1.5px solid rgb(50, 100, 200)">
                                <a class="dropdown-item" href="article-details.html"><span class="item-text">ABOUT US</span></a>
                                <div class="dropdown-items-divide-hr"></div>
                                <a class="dropdown-item" href="terms-conditions.html"><span class="item-text">NEWSROOM</span></a>
                                <div class="dropdown-items-divide-hr"></div>
                                <a class="dropdown-item" href="privacy-policy.html"><span class="item-text">CONTACT US</span></a>
                                <div class="dropdown-items-divide-hr"></div>
                                <a class="dropdown-item" href="privacy-policy.html"><span class="item-text">CAREER OPPORTUNITIES</span></a>
                            </div>
                        </li>
                    </ul>
                    <span class="nav-item">
                        <li class="nav-item dropdown">
                            <a class="btn-outline-sm", id="navbarDropdown", role="button", aria-haspopup="true" aria-expanded="false" href="log-in.html">EMPLOYER LOG IN</a>
                            <!-- <div class="dropdown-menu" aria-labelledby="navbarDropdown", style="background-color: rgb(135, 25, 206); border: 1.5px solid rgb(50)">
                                <a class="dropdown-item" href="#" onclick="signOut()"><span class="item-text">SIGN OUT</span></a>
                            </div> -->
                        </li>
    
                    </span>
                </div>
            </div> <!-- end of container -->
        </nav> <!-- end of navbar -->
        <!-- end of navigation -->
              <!-- Breadcrumbs -->
      <div class="ex-basic-1">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumbs">
                        <!-- <a href="index.html">Home</a><i class="fa fa-angle-double-right"></i><span>Terms & Conditions</span> -->
                    </div> <!-- end of breadcrumbs -->
                </div> <!-- end of col -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </div> <!-- end of ex-basic-1
    end of breadcrumbs -->
    <header id="header" class="ex-2-header signup" style="background-color: brown;">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
    <h1 style="padding: 20px;">Create your LevelUp ID</h1>
    <!-- <p>Already signed up? Then just <a class="white" href="log-in.html">Log In</a></p>  -->
    <div class="form-container", style="padding: 2.25rem 1.75rem 0.01rem 1.75rem; margin-bottom: 10rem;">
    <form id="LevelUpIdForm">
            <div class="form-group">
            <input type="text" id="phone" class="form-control-input" title="Phone number must start with +1 followed by ten digits" required>
            <label for="phone" class="label-control">Phone:</label>
            </div>
            <div class="form-group">
            <input type="text" id="address"  class="form-control-input" required>
            <label for="address" class="label-control">Address:</label>
            <div class="help-block with-errors"></div>
            </div>
            <div class="form-group">
            <input type="text" id="city" class="form-control-input" required>
            <label for="city" class="label-control">City:</label>
            <div class="help-block with-errors"></div>
            </div>
            <div class="form-group">
            <select id="state" class="form-control-input" required>
                <option value="" class="form-control-input" ></option>
                <option value="Alabama">Alabama</option>
                <option value="Alaska">Alaska</option>
                <option value="Arizona">Arizona</option>
                <option value="Arkansas">Arkansas</option>
                <option value="California">California</option>
                <option value="Colorado">Colorado</option>
                <option value="Connecticut">Connecticut</option>
                <option value="Delaware">Delaware</option>
                <option value="Florida">Florida</option>
                <option value="Georgia">Georgia</option>
                <option value="Hawaii">Hawaii</option>
                <option value="Idaho">Idaho</option>
                <option value="Illinois">Illinois</option>
                <option value="Indiana">Indiana</option>
                <option value="Iowa">Iowa</option>
                <option value="Kansas">Kansas</option>
                <option value="Kentucky">Kentucky</option>
                <option value="Louisiana">Louisiana</option>
                <option value="Maine">Maine</option>
                <option value="Maryland">Maryland</option>
                <option value="Massachusetts">Massachusetts</option>
                <option value="Michigan">Michigan</option>
                <option value="Minnesota">Minnesota</option>
                <option value="Mississippi">Mississippi</option>
                <option value="Missouri">Missouri</option>
                <option value="Montana">Montana</option>
                <option value="Nebraska">Nebraska</option>
                <option value="Nevada">Nevada</option>
                <option value="New Hampshire">New Hampshire</option>
                <option value="New Jersey">New Jersey</option>
                <option value="New Mexico">New Mexico</option>
                <option value="New York">New York</option>
                <option value="North Carolina">North Carolina</option>
                <option value="North Dakota">North Dakota</option>
                <option value="Ohio">Ohio</option>
                <option value="Oklahoma">Oklahoma</option>
                <option value="Oregon">Oregon</option>
                <option value="Pennsylvania">Pennsylvania</option>
                <option value="Rhode Island">Rhode Island</option>
                <option value="South Carolina">South Carolina</option>
                <option value="South Dakota">South Dakota</option>
                <option value="Tennessee">Tennessee</option>
                <option value="Texas">Texas</option>
                <option value="Utah">Utah</option>
                <option value="Vermont">Vermont</option>
                <option value="Virginia">Virginia</option>
                <option value="Washington">Washington</option>
                <option value="West Virginia">West Virginia</option>
                <option value="Wisconsin">Wisconsin</option>
                <option value="Wyoming">Wyoming</option>
                <!-- Add more options as needed -->
            </select>
            <label for="state" class="label-control">State:</label>
            <div class="help-block with-errors"></div>
            </div>
            <div class="form-group">
            <input type="text" id="zipcode" class="form-control-input" required pattern="\d{5}" title="Five digit zip code">
            <label for="zipcode" class="label-control">Zip Code:</label>
            <div class="help-block with-errors"></div>
            </div>
            <div class="form-group">
            <select id="industry" class="form-control-input" required>
                <option value="" class="form-control-input"></option>
                <option value="accounting">Accounting</option>
                <option value="advertising">Advertising</option>
                <option value="agriculture">Agriculture</option>
                <option value="automotive">Automotive</option>
                <option value="banking">Banking</option>
                <option value="construction">Construction</option>
                <option value="consulting">Consulting</option>
                <option value="education">Education</option>
                <option value="energy">Energy</option>
                <option value="engineering">Engineering</option>
                <option value="entertainment">Entertainment</option>
                <option value="environmental">Environmental</option>
                <option value="finance">Finance</option>
                <option value="food-service">Food Service</option>
                <option value="government">Government</option>
                <option value="healthcare">Healthcare</option>
                <option value="hospitality">Hospitality</option>
                <option value="insurance">Insurance</option>
                <option value="manufacturing">Manufacturing</option>
                <option value="media">Media</option>
                <option value="pharmaceutical">Pharmaceutical</option>
                <option value="real-estate">Real Estate</option>
                <option value="retail">Retail</option>
                <option value="sport">Sport</option>
                <option value="technology">Technology</option>
                <option value="telecommunications">Telecommunications</option>
                <option value="tourism">Tourism</option>
                <option value="transportation">Transportation</option>
            </select>
            <label for="industry" class="label-control">Industry:</label>
            <div class="help-block with-errors"></div>
            </div>    
            <div class="form-group">
                <select id="company_size" class="form-control-input" required>
                    <option value="" class="form-control-input"></option>
                    <option value="1-5_empoyees">1-5 employees</option>
                    <option value="6-10_employees">6-10 employees</option>
                    <option value="11-50_employees">11-50 employees</option>
                    <option value="51-200_employees">51-200 employees</option>
                    <option value="201-500_employees">201-500 employees</option>
                    <option value="501+_employees">501+ employees</option>
                </select>
                <label for="company_size" class="label-control">Company size:</label>
                <div class="help-block with-errors"></div>
                </div>   
                <div class="form-group">
                    <select id="annual_revenue" class="form-control-input" required>
                        <option value="" class="form-control-input"></option>
                        <option value="less_1_m">Less than $1M</option>
                        <option value="1-5_m">$1-5M</option>
                        <option value="5-10_m">$5-10M</option>
                        <option value="10-50_m">$10-50M</option>
                        <option value="50-100_m">$50-100M</option>
                        <option value="100+_m">$100+M</option>
                    </select>
                    <label for="annual_revenue" class="label-control">Annual revenue:</label>
                    <div class="help-block with-errors"></div>
                    </div>   
                <div class="form-group">
                    <select id="company_structure" class="form-control-input" required>
                        <option value="" class="form-control-input"></option>
                        <option value="public">Corporation (S, C, or B)</option>
                        <option value="private">Limited Liability Company (LLC)</option>
                        <option value="Partnership">Partnership (GP, LP, LLP)</option>
                        <option value="sole_proprietorship">Sole Proprietorship</option>
                        <option value="government">Government</option>
                        <option value="non_profit">Non-profit</option>
                    </select>
                    <label for="company_structure" class="label-control">Company structure:</label>
                    <div class="help-block with-errors"></div>
                </div>
        <div class="form-group">
        <button type="submit" id="submitBtn" class="form-control-submit-button">Create</button>
    </div>
    </form>
                    </div>
                </div> <!-- end of col -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </header> <!-- end of ex-header -->
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js"></script>
    <script>
        // Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyDWXpvIim5vIzo-mMJvojHF5sJ04WgBvSA",
            authDomain: "levelup-65b5b.firebaseapp.com",
            projectId: "levelup-65b5b",
            storageBucket: "levelup-65b5b.appspot.com",
            messagingSenderId: "13469845736",
            appId: "1:13469845736:web:aa4b300ead478eac30215d",
            measurementId: "G-B7HVG7T7VZ"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        document.getElementById('LevelUpIdForm').addEventListener('submit', function(event) {
        event.preventDefault();

        // Define submitBtn within the function scope
        const submitBtn = document.getElementById('submitBtn');

        // Indicate loading
        submitBtn.innerHTML = 'Saving...';
        submitBtn.disabled = true;

        const phone = document.getElementById('phone').value;
        const address = document.getElementById('address').value;
        const city = document.getElementById('city').value;
        const state = document.getElementById('state').value;
        const zipcode = document.getElementById('zipcode').value;
        const industry = document.getElementById('industry').value;
        const company_size = document.getElementById('company_size').value;
        const annual_revenue = document.getElementById('annual_revenue').value;
        const company_structure = document.getElementById('company_structure').value;

        const answers = {
            phone,
            address,
            city,
            state,
            zipcode,
            industry,
            company_size,
            annual_revenue,
            company_structure
        };

        const user = firebase.auth().currentUser;
        if (user) {
            console.log('Current user ID: ', user.uid); // Debugging: Log the user ID
            db.collection('employers').doc(user.uid).set(answers, { merge: true })
                .then(() => {
                    console.log('Document successfully written!');
                    setTimeout(() => {
                        window.location.href = 'profile_performance.html'; // Redirect to profile page
                    }, 1000); // Redirect after 1 second
                })
                .catch((error) => {
                    console.error('Error writing document: ', error);
                    alert('Error saving your answers. Please try again.'); // Provide feedback to the user
                })
                .finally(() => {
                    // Revert button to original state regardless of success or failure
                    submitBtn.innerHTML = 'Sign Up';
                    submitBtn.disabled = false;
                });
        } else {
            console.log('No user is signed in.'); // Debugging: Log when no user is signed in
            alert('No user is signed in. Please sign in to save your answers.');
            // Revert button to original state when no user is signed in
            submitBtn.innerHTML = 'Sign Up';
            submitBtn.disabled = false;
        }
    });
    </script>
    <!-- Scripts -->
    <script src="js/jquery.min.js"></script> <!-- jQuery for Bootstrap's JavaScript plugins -->
    <script src="js/popper.min.js"></script> <!-- Popper tooltip library for Bootstrap -->
    <script src="js/bootstrap.min.js"></script> <!-- Bootstrap framework -->
    <script src="js/jquery.easing.min.js"></script> <!-- jQuery Easing for smooth scrolling between anchors -->
    <script src="js/swiper.min.js"></script> <!-- Swiper for image and text sliders -->
    <script src="js/jquery.magnific-popup.js"></script> <!-- Magnific Popup for lightboxes -->
    <script src="js/validator.min.js"></script> <!-- Validator.js - Bootstrap plugin that validates forms -->
    <script src="js/scripts.js"></script> <!-- Custom scripts -->
    <script>
            function signOut() {
            firebase.auth().signOut().then(() => {
                // Sign-out successful
                window.location.href = "/index.html"; // replace with the path to your home page
            }).catch((error) => {
                // An error happened
                console.error("Sign out error", error);
            });
        }
    </script>
    <script>
        firebase.auth().onAuthStateChanged((user) => {
            var loginLink = document.getElementById("navbarDropdown-profile");
    
            if (user) {
                loginLink.textContent = "MY PROFILE";
                loginLink.href = "profile.html";
            } else {
                loginLink.textContent = "EMPLOYER LOG IN";
                loginLink.href = "log-in.html";
            }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const phoneInput = document.getElementById('phone');

            phoneInput.addEventListener('input', function() {
                let inputNumbersValue = this.value.replace(/\D/g, ''); // Remove all non-digits
                let formattedInputValue = '';

                // Check if the input is long enough to start formatting
                if (inputNumbersValue.startsWith('1')) {
                    // Remove the leading '1' if it's there
                    inputNumbersValue = inputNumbersValue.substring(1);
                }

                // Limit the input to 10 digits after removing country code
                inputNumbersValue = inputNumbersValue.substring(0, 10);

                if (inputNumbersValue.length <= 3) {
                    formattedInputValue = '+1 (' + inputNumbersValue;
                } else if (inputNumbersValue.length <= 6) {
                    formattedInputValue = '+1 (' + inputNumbersValue.substring(0, 3) + ') ' + inputNumbersValue.substring(3);
                } else if (inputNumbersValue.length <= 10) {
                    formattedInputValue = '+1 (' + inputNumbersValue.substring(0, 3) + ') ' + inputNumbersValue.substring(3, 6) + '-' + inputNumbersValue.substring(6);
                }

                this.value = formattedInputValue;
            });
        });
    </script>
    <script>
            const handleSelectChange = (event) => {
            if (event.target.value) {
                event.target.classList.add('notEmpty');
            } else {
                event.target.classList.remove('notEmpty');
            }
        };

        document.getElementById('state').addEventListener('change', handleSelectChange);
        document.getElementById('industry').addEventListener('change', handleSelectChange);
        document.getElementById('company_size').addEventListener('change', handleSelectChange);
        document.getElementById('annual_revenue').addEventListener('change', handleSelectChange);
        document.getElementById('company_structure').addEventListener('change', handleSelectChange);

        document.getElementById('sign-out-button').addEventListener('click', () => {
            auth.signOut().then(() => {
                window.location.href = "/index.html";
            }).catch((error) => {
                console.error("Sign out error", error);
            });
        });
    </script>
</body>
</html>
